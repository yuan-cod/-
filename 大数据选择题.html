<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§æ•°æ®æœŸæœ«é€šå…³åˆ·é¢˜æœ¬ (å…¨é‡ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f3f4f6; color: #1f2937; }
        .btn-option { transition: all 0.2s; }
        .btn-option:active { transform: scale(0.99); }
        .correct-bg { background-color: #dcfce7 !important; border-color: #22c55e !important; color: #14532d !important; }
        .wrong-bg { background-color: #fee2e2 !important; border-color: #ef4444 !important; color: #7f1d1d !important; }
        .selected-bg { background-color: #e0f2fe; border-color: #3b82f6; color: #1e40af; font-weight: 600; }
        
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="bg-white shadow-sm z-20 shrink-0">
        <div class="px-4 py-3 border-b border-gray-100 flex justify-between items-center">
            <div>
                <h1 class="text-lg font-bold text-slate-800">å¤§æ•°æ®å…¨çœŸé¢˜åº“</h1>
                <p class="text-xs text-slate-500">è¦†ç›– 1-5 ç«  â€¢ å«ä¸»è§‚é¢˜</p>
            </div>
            <div class="flex gap-2">
                <div class="text-right">
                    <span id="scoreText" class="text-xl font-bold text-blue-600">0</span>
                    <span class="text-xs text-gray-400">åˆ†</span>
                </div>
            </div>
        </div>
        
        <!-- ç« èŠ‚ç­›é€‰å™¨ -->
        <div class="flex overflow-x-auto gap-2 p-2 bg-slate-50 no-scrollbar">
            <button onclick="setFilter('all')" class="filter-btn px-3 py-1 text-xs font-bold rounded-full bg-slate-800 text-white whitespace-nowrap shadow-sm">å…¨å· (All)</button>
            <button onclick="setFilter('part1')" class="filter-btn px-3 py-1 text-xs font-medium rounded-full bg-white text-slate-600 border border-slate-200 whitespace-nowrap hover:border-blue-400">ç¬¬1/2ç«  (åŸºç¡€)</button>
            <button onclick="setFilter('part2')" class="filter-btn px-3 py-1 text-xs font-medium rounded-full bg-white text-slate-600 border border-slate-200 whitespace-nowrap hover:border-blue-400">ç¬¬3ç«  (é‡‡é›†)</button>
            <button onclick="setFilter('part3')" class="filter-btn px-3 py-1 text-xs font-medium rounded-full bg-white text-slate-600 border border-slate-200 whitespace-nowrap hover:border-blue-400">ç¬¬4/5ç«  (å­˜ç®—)</button>
            <button onclick="setFilter('subjective')" class="filter-btn px-3 py-1 text-xs font-medium rounded-full bg-white text-slate-600 border border-slate-200 whitespace-nowrap hover:border-purple-400 text-purple-600">ä¸»è§‚é¢˜ (èƒŒè¯µ)</button>
        </div>
        
        <!-- è¿›åº¦æ¡ -->
        <div class="h-1 w-full bg-gray-200">
            <div id="progressBar" class="h-1 bg-blue-600 transition-all duration-300" style="width: 0%"></div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-1 overflow-y-auto p-4 md:p-6 bg-slate-100 relative" id="mainContainer">
        
        <!-- æ¬¢è¿é¡µ -->
        <div id="welcomeCard" class="max-w-xl mx-auto bg-white rounded-xl shadow-sm p-8 text-center mt-10">
            <div class="text-5xl mb-4">ğŸ“š</div>
            <h2 class="text-2xl font-bold text-slate-800 mb-2">å‡†å¤‡å¥½äº†å—ï¼Ÿ</h2>
            <p class="text-slate-600 mb-6 text-sm">æœ¬é¢˜åº“åŒ…å«çº¦ 25 é“å®¢è§‚é¢˜å’Œ 2 é“æ ¸å¿ƒä¸»è§‚é¢˜ã€‚<br>è¯·é€‰æ‹©ä¸Šæ–¹ç« èŠ‚å¼€å§‹åˆ·é¢˜ã€‚</p>
            <button onclick="setFilter('all')" class="px-8 py-3 bg-blue-600 text-white rounded-lg font-bold shadow-lg shadow-blue-200 hover:bg-blue-700 active:scale-95 transition">å¼€å§‹å…¨å·æ¨¡æ‹Ÿ</button>
        </div>

        <!-- é¢˜ç›®å¡ç‰‡ (åŠ¨æ€ç”Ÿæˆ) -->
        <div id="questionCard" class="hidden max-w-2xl mx-auto bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <!-- é¢˜å¹² -->
            <div class="p-6 border-b border-slate-50 bg-white">
                <div class="flex justify-between items-start mb-3">
                    <span id="qTag" class="px-2 py-0.5 rounded text-[10px] font-bold uppercase bg-blue-100 text-blue-600 tracking-wide">å•é€‰é¢˜</span>
                    <span id="qIndex" class="text-xs text-slate-400 font-mono">1/30</span>
                </div>
                <h3 id="qText" class="text-lg font-bold text-slate-800 leading-relaxed">é¢˜ç›®åŠ è½½ä¸­...</h3>
            </div>

            <!-- é€‰é¡¹åŒºåŸŸ -->
            <div id="optionsArea" class="p-4 space-y-3 bg-slate-50 min-h-[200px]">
                <!-- é€‰é¡¹ç”± JS æ³¨å…¥ -->
            </div>

            <!-- è§£æåŒºåŸŸ (é»˜è®¤éšè—) -->
            <div id="feedbackArea" class="hidden p-5 bg-white border-t border-slate-100">
                <div id="feedbackTitle" class="font-bold mb-1"></div>
                <div id="feedbackContent" class="text-sm text-slate-600 leading-relaxed"></div>
            </div>
        </div>

        <!-- ä¸»è§‚é¢˜å¡ç‰‡ (ä¸“ç”¨) -->
        <div id="subjectiveCard" class="hidden max-w-2xl mx-auto space-y-4">
            <!-- åŠ¨æ€æ³¨å…¥ä¸»è§‚é¢˜ -->
        </div>

    </main>

    <!-- åº•éƒ¨æ§åˆ¶æ  -->
    <footer id="controlBar" class="hidden bg-white border-t p-3 shrink-0 z-20">
        <div class="max-w-2xl mx-auto flex justify-between items-center">
            <button onclick="prevQ()" class="px-4 py-2 text-slate-500 text-sm font-medium hover:bg-slate-100 rounded-lg transition">ä¸Šä¸€é¢˜</button>
            <button onclick="checkAnswer()" id="submitBtn" class="hidden px-8 py-2 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition">æäº¤</button>
            <button onclick="nextQ()" id="nextBtn" class="px-8 py-2 bg-slate-800 text-white font-bold rounded-lg shadow-md hover:bg-slate-700 transition">ä¸‹ä¸€é¢˜</button>
        </div>
    </footer>

    <script>
        // === å…¨é‡é¢˜åº“æ•°æ® ===
        const allQuestions = [
            // --- ç¬¬1/2ç«  (åŸºç¡€) ---
            {
                id: 1, section: 'part1', type: 'single',
                q: "1. æ•°æ®ä½¿ç”¨æµç¨‹çš„ç¬¬ä¸€æ­¥æ˜¯ï¼ˆ ï¼‰",
                options: ["A. æ•°æ®åˆ†æ", "B. æ•°æ®ç®¡ç†", "C. æ•°æ®å­˜å‚¨", "D. æ•°æ®æ¸…æ´—"],
                correct: [3],
                note: "æ•°æ®é—­ç¯ï¼šæ•°æ®æ¸…æ´— â†’ æ•°æ®ç®¡ç† â†’ æ•°æ®åˆ†æã€‚"
            },
            {
                id: 2, section: 'part1', type: 'single',
                q: "2. ä¸‹åˆ—ä¸å±äºæ”¯æ’‘å¤§æ•°æ®æ—¶ä»£çš„ä¿¡æ¯ç§‘æŠ€æ¡ä»¶çš„æ˜¯ï¼ˆ ï¼‰",
                options: ["A. CPUè®¡ç®—èƒ½åŠ›å¢å¼º", "B. å­˜å‚¨è®¾å¤‡å®¹é‡æå‡", "C. çº¸è´¨åª’ä½“æŠ€æœ¯å‡çº§", "D. ç½‘ç»œå¸¦å®½æ‰©å¤§"],
                correct: [2],
                note: "å¤§æ•°æ®ä¾èµ–è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œï¼Œä¸çº¸è´¨åª’ä½“æ— å…³ã€‚"
            },
            {
                id: 3, section: 'part1', type: 'single',
                q: "3. ç¬¬äºŒæ¬¡ä¿¡æ¯åŒ–æµªæ½®ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼ˆ ï¼‰",
                options: ["A. ä¿¡æ¯å¤„ç†", "B. ä¿¡æ¯çˆ†ç‚¸", "C. ä¿¡æ¯ä»·å€¼", "D. ä¿¡æ¯ä¼ è¾“"],
                correct: [3],
                note: "ç¬¬ä¸€æ¬¡(PC): å¤„ç†; ç¬¬äºŒæ¬¡(äº’è”ç½‘): ä¼ è¾“; ç¬¬ä¸‰æ¬¡(IoT): ä»·å€¼ã€‚"
            },
            {
                id: 4, section: 'part1', type: 'single',
                q: "4. ç¬¬ä¸‰æ¬¡ä¿¡æ¯åŒ–æµªæ½®çš„æ ¸å¿ƒæ ‡å¿—æ˜¯ï¼ˆ ï¼‰",
                options: ["A. ä¸ªäººè®¡ç®—æœºæ™®åŠ", "B. 5GæŠ€æœ¯å•†ç”¨", "C. ç‰©è”ç½‘ã€äº‘è®¡ç®—å’Œå¤§æ•°æ®çš„å‡ºç°", "D. äº’è”ç½‘è¯ç”Ÿ"],
                correct: [2]
            },
            {
                id: 5, section: 'part1', type: 'single',
                q: "5. æ•°æ®äº§ç”Ÿæ–¹å¼å˜é©çš„ç¬¬ä¸‰é˜¶æ®µæ˜¯ï¼ˆ ï¼‰",
                options: ["A. ç”¨æˆ·åŸåˆ›å†…å®¹é˜¶æ®µ", "B. è¿è¥å¼ç³»ç»Ÿé˜¶æ®µ", "C. äººå·¥è®°å½•é˜¶æ®µ", "D. æ„ŸçŸ¥å¼ç³»ç»Ÿé˜¶æ®µ"],
                correct: [3],
                note: "è¿è¥å¼(DB) â†’ UGC(Web2.0) â†’ æ„ŸçŸ¥å¼(IoT)ã€‚"
            },
            {
                id: 6, section: 'part1', type: 'single',
                q: "6. ä¸‹åˆ—ä½“ç°å¤§æ•°æ®â€œValueï¼ˆä»·å€¼å¯†åº¦ä½ï¼‰â€ç‰¹å¾çš„æ¡ˆä¾‹æ˜¯ï¼ˆ ï¼‰",
                options: ["A. æŸç”µå•†å¹³å°å•æ—¥æ–°å¢æ•°æ®50TB", "B. ç›‘æ§è§†é¢‘ä¸­ä»…1-2ç§’ä¸ºæœ‰æ•ˆä¿¡æ¯", "C. æ•°æ®ç±»å‹åŒ…å«æ–‡æœ¬ã€å›¾ç‰‡ç­‰", "D. å®æ—¶æ¨èéœ€ç§’çº§å¤„ç†"],
                correct: [1],
                note: "Aæ˜¯Volumeï¼ŒCæ˜¯Varietyï¼ŒDæ˜¯Velocityã€‚"
            },
            {
                id: 7, section: 'part1', type: 'single',
                q: "7. ä¼ä¸šé‡‡ç”¨äº‘è®¡ç®—çš„ä¼˜åŠ¿ä¸åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. åˆæœŸé›¶æˆæœ¬", "B. åæœŸå…ç»´æŠ¤", "C. éœ€è‡ªå»ºITåŸºç¡€è®¾æ–½", "D. èµ„æºäºˆå–äºˆæ±‚"],
                correct: [2],
                note: "äº‘è®¡ç®—çš„æ ¸å¿ƒæ˜¯â€œå…è‡ªå»ºâ€ã€‚"
            },
            {
                id: 8, section: 'part1', type: 'single',
                q: "8. ä¼ ç»ŸITèµ„æºè·å–æ–¹å¼çš„ç¼ºç‚¹ä¸åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. å¯æŒ‰éœ€åŠ¨æ€æ‰©å±•", "B. åˆæœŸå»ºè®¾æˆæœ¬é«˜", "C. åæœŸéœ€ä¸“äººç»´æŠ¤", "D. èµ„æºä¾›åº”æœ‰é™"],
                correct: [0],
                note: "â€œå¯æŒ‰éœ€æ‰©å±•â€æ˜¯äº‘è®¡ç®—çš„ä¼˜ç‚¹ï¼Œä¼ ç»ŸITåšä¸åˆ°ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯ä¼ ç»ŸITçš„ç¼ºç‚¹ï¼Œè€Œæ˜¯å®ƒæ ¹æœ¬ä¸å…·å¤‡çš„ç‰¹æ€§ã€‚"
            },

            // --- ç¬¬3ç«  (é‡‡é›†ä¸é¢„å¤„ç†) ---
            {
                id: 9, section: 'part2', type: 'single',
                q: "9. ä¸‹åˆ—å“ªé¡¹ä¸æ˜¯å¤§æ•°æ®é‡‡é›†çš„ç‰¹ç‚¹ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. æ•°æ®æºå•ä¸€", "B. æ•°æ®é‡å¤§", "C. å®æ—¶æ€§å¼º", "D. ç»“æ„å¤æ‚"],
                correct: [0],
                note: "å¤§æ•°æ®é‡‡é›†å…·æœ‰å¤šæºã€å¼‚æ„çš„ç‰¹ç‚¹ã€‚"
            },
            {
                id: 10, section: 'part2', type: 'single',
                q: "10. è´Ÿè´£åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†çš„ç»„ä»¶æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. Kafka", "B. Flume", "C. Sqoop", "D. Storm"],
                correct: [1],
                note: "Flume: æ—¥å¿—æ”¶é›†; Kafka: æ¶ˆæ¯é˜Ÿåˆ—; Sqoop: æ•°æ®åº“ä¼ è¾“ã€‚"
            },
            {
                id: 11, section: 'part2', type: 'single',
                q: "11. æ•°æ®æ¸…æ´—çš„ä¸»è¦ä»»åŠ¡ä¸åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. å¡«è¡¥ç¼ºå¤±å€¼", "B. å»é™¤é‡å¤æ•°æ®", "C. æ•°æ®å¯è§†åŒ–", "D. çº æ­£é”™è¯¯æ•°æ®"],
                correct: [2],
                note: "å¯è§†åŒ–æ˜¯åˆ†æåçš„å±•ç¤ºç¯èŠ‚ã€‚"
            },
            {
                id: 12, section: 'part2', type: 'single',
                q: "12. é€‚åˆä½œä¸ºé«˜ååé‡æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—çš„ç»„ä»¶æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. Flume", "B. Kafka", "C. HDFS", "D. Spark"],
                correct: [1],
                note: "Kafka å¸¸ç”¨äºå‰Šå³°å¡«è°·ï¼Œä½œä¸ºæ¶ˆæ¯æ€»çº¿ã€‚"
            },

            // --- ç¬¬4/5ç«  (å­˜å‚¨ä¸è®¡ç®—) ---
            {
                id: 13, section: 'part3', type: 'single',
                q: "13. HDFSçš„ä¸»ä»ç»“æ„ä¸­ï¼Œè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´çš„æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. DataNode", "B. Client", "C. NameNode", "D. Rack"],
                correct: [2]
            },
            {
                id: 14, section: 'part3', type: 'single',
                q: "14. Hadoopç»„ä»¶ä¸­ï¼Œæä¾›ç±»ä¼¼äºSQLæŸ¥è¯¢è¯­è¨€çš„å·¥å…·æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. Hive", "B. Mahout", "C. Zookeeper", "D. Flume"],
                correct: [0],
                note: "Hive å°† HQL è½¬åŒ–ä¸º MapReduceã€‚"
            },
            {
                id: 15, section: 'part3', type: 'single',
                q: "15. æ”¯æŒHadoopä¸å…³ç³»å‹æ•°æ®åº“æ•°æ®äº¤äº’çš„ç»„ä»¶ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. Flume", "B. Pig", "C. Zookeeper", "D. Sqoop"],
                correct: [3],
                note: "Sqoop = SQL + Hadoopã€‚"
            },
            {
                id: 16, section: 'part3', type: 'single',
                q: "16. é€‚åˆå¤„ç†é«˜åº¦ç›¸äº’å…³è”æ•°æ®ï¼ˆå¦‚ç¤¾äº¤ç½‘ç»œï¼‰çš„NoSQLæ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. é”®å€¼æ•°æ®åº“", "B. æ–‡æ¡£æ•°æ®åº“", "C. åˆ—æ—æ•°æ®åº“", "D. å›¾æ•°æ®åº“"],
                correct: [3],
                note: "å›¾æ•°æ®åº“ (Neo4j) ä¸“æ”»å…³ç³»ç½‘ç»œã€‚"
            },
            {
                id: 17, section: 'part3', type: 'single',
                q: "17. äº‘æ•°æ®åº“çš„ç‰¹æ€§ä¸åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. åŠ¨æ€å¯æ‰©å±•", "B. ç»´æŠ¤æˆæœ¬é«˜", "C. é«˜å¯ç”¨æ€§", "D. æ˜“ç”¨æ€§å¼º"],
                correct: [1],
                note: "äº‘æ•°æ®åº“å…ç»´æŠ¤ï¼Œæˆæœ¬ä½ã€‚"
            },
            {
                id: 18, section: 'part3', type: 'single',
                q: "18. NoSQLä¸­æ‰©å±•æ€§å¥½ã€é€‚åˆé¢‘ç¹è¯»å†™ç®€å•æ¨¡å‹çš„æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. å›¾æ•°æ®åº“", "B. æ–‡æ¡£æ•°æ®åº“", "C. åˆ—æ—æ•°æ®åº“", "D. é”®å€¼æ•°æ®åº“"],
                correct: [3],
                note: "Redis (é”®å€¼) è¯»å†™æœ€å¿«ï¼Œæ¨¡å‹æœ€ç®€å•ã€‚"
            },
            {
                id: 19, section: 'part3', type: 'multi',
                q: "19. (å¤šé€‰) Hadoopçš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. é«˜å¯é æ€§", "B. é«˜å¯æ‰©å±•æ€§", "C. é«˜å®¹é”™æ€§", "D. æˆæœ¬ä½"],
                correct: [0, 1, 2, 3],
                note: "å…¨é€‰ã€‚å»‰ä»·æœºå™¨(ä½æˆæœ¬)ï¼Œå¤šå‰¯æœ¬(å¯é /å®¹é”™)ï¼Œæ˜“åŠ èŠ‚ç‚¹(æ‰©å±•)ã€‚"
            },
            {
                id: 20, section: 'part3', type: 'multi',
                q: "20. (å¤šé€‰) å…³äºHDFSè¯´æ³•æ­£ç¡®çš„æ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. GFSæ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ", "B. HDFSé‡‡ç”¨ä¸»ä»ç»“æ„", "C. NameNodeå‘DataNodeå‘å¿ƒè·³", "D. HDFSæ˜¯GFSçš„å¼€æºå®ç°"],
                correct: [0, 1, 3],
                note: "Cé”™ï¼šæ˜¯DataNodeå‘NameNodeå‘å¿ƒè·³æ±‡æŠ¥çŠ¶æ€ã€‚"
            },
            {
                id: 21, section: 'part3', type: 'multi',
                q: "21. (å¤šé€‰) HDFS è¯»æ•°æ®æ—¶çš„æœºåˆ¶åŒ…æ‹¬ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. æœºæ¶æ„ŸçŸ¥", "B. å°±è¿‘è¯»å–", "C. å¹¶è¡Œè¯»å–æ‰€æœ‰å—", "D. ä¸²è¡Œè¯»å–"],
                correct: [0, 1, 4], // æ³¨ï¼šDåœ¨å¾ˆå¤šæ•™æä¸­è§†ä¸ºæ­£ç¡®ï¼Œå› ä¸ºClientæŒ‰é¡ºåºè¯»Block
                note: "æœºæ¶æ„ŸçŸ¥é€‰æ‹©æœ€è¿‘èŠ‚ç‚¹ï¼›é€šå¸¸æŒ‰Blocké¡ºåºä¸²è¡Œè¯»å–ã€‚"
            },
            {
                id: 22, section: 'part3', type: 'single',
                q: "22. MapReduce ä¸­è¿æ¥ Map å’Œ Reduce çš„æ ¸å¿ƒé˜¶æ®µæ˜¯ï¼Ÿï¼ˆ ï¼‰",
                options: ["A. Split", "B. Sort", "C. Shuffle", "D. Combine"],
                correct: [2],
                note: "Shuffle (æ´—ç‰Œ) è´Ÿè´£æ•°æ®çš„æ’åºã€åˆ†ç»„å’Œä¼ è¾“ã€‚"
            }
        ];

        const subjectiveQuestions = [
            {
                title: "1. ç®€è¿° HDFS å†™æ•°æ®æµç¨‹",
                key: "Pipeline, Packet, Ack",
                content: `
                <ol class="list-decimal pl-5 space-y-2 text-sm text-slate-700">
                    <li><strong>è¯·æ±‚</strong>ï¼šClient å‘ NameNode è¯·æ±‚ä¸Šä¼ ï¼ŒNameNode æ£€æŸ¥æƒé™/ç›®å½•ã€‚</li>
                    <li><strong>åˆ‡åˆ†</strong>ï¼šClient å°†æ–‡ä»¶åˆ‡åˆ†ä¸º Block å’Œ Packetã€‚</li>
                    <li><strong>ç®¡é“</strong>ï¼šClient ä¸ DataNode åˆ—è¡¨å»ºç«‹ <span class="text-red-600 font-bold">Pipeline (ç®¡é“)</span> (A->B->C)ã€‚</li>
                    <li><strong>ä¼ è¾“</strong>ï¼šæ•°æ®æµå¼å†™å…¥ã€‚</li>
                    <li><strong>ç¡®è®¤</strong>ï¼šDataNode åå‘å‘é€ <span class="text-red-600 font-bold">Ack (ç¡®è®¤åŒ…)</span> (C->B->A->Client)ã€‚</li>
                    <li><strong>å®Œæˆ</strong>ï¼šClient é€šçŸ¥ NameNode å…³æµã€‚</li>
                </ol>`
            },
            {
                title: "2. MapReduce çš„å·¥ä½œæµç¨‹",
                key: "Split, Map, Shuffle, Reduce",
                content: `
                <ol class="list-decimal pl-5 space-y-2 text-sm text-slate-700">
                    <li><strong>Split (åˆ‡ç‰‡)</strong>ï¼šå°†è¾“å…¥æ•°æ®åˆ‡åˆ†ï¼Œåˆ†é…ç»™ Map ä»»åŠ¡ã€‚</li>
                    <li><strong>Map (æ˜ å°„)</strong>ï¼šå¹¶è¡Œå¤„ç†ï¼Œè¾“å‡º &lt;Key, Value&gt;ã€‚</li>
                    <li><strong>Shuffle (æ´—ç‰Œ)</strong>ï¼š<span class="text-red-600 font-bold">æ ¸å¿ƒé˜¶æ®µ</span>ã€‚åŒ…æ‹¬åˆ†åŒº(Partition)ã€æ’åº(Sort)ã€åˆå¹¶(Combine)ã€æº¢å†™ã€æ‹‰å–ã€‚å°†ç›¸åŒ Key ä¼ ç»™åŒä¸€ä¸ª Reduceã€‚</li>
                    <li><strong>Reduce (å½’çº¦)</strong>ï¼šæ±‡æ€»è®¡ç®—ï¼Œè¾“å‡ºæœ€ç»ˆç»“æœã€‚</li>
                </ol>`
            }
        ];

        // === é€»è¾‘æ§åˆ¶ ===
        let currentFilter = 'all';
        let filteredQuestions = [];
        let currentIndex = 0;
        let userAnswers = {}; // { qId: [0, 2] }
        let score = 0;

        // åˆå§‹åŒ–
        window.onload = () => {
            // setFilter('all'); // é»˜è®¤ä¸è‡ªåŠ¨å¼€å§‹ï¼Œåœåœ¨æ¬¢è¿é¡µ
        };

        function setFilter(filter) {
            currentFilter = filter;
            
            // UI æ›´æ–°
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.innerText.toLowerCase().includes(filter === 'all' ? 'all' : (filter === 'subjective' ? 'ä¸»è§‚' : (filter === 'part1' ? '1/2' : (filter === 'part2' ? '3' : '4/5'))))) {
                    btn.classList.add('bg-slate-800', 'text-white', 'shadow-sm');
                    btn.classList.remove('bg-white', 'text-slate-600', 'border');
                } else {
                    btn.classList.remove('bg-slate-800', 'text-white', 'shadow-sm');
                    btn.classList.add('bg-white', 'text-slate-600', 'border');
                }
            });

            // éšè—æ¬¢è¿é¡µ
            document.getElementById('welcomeCard').classList.add('hidden');
            
            if (filter === 'subjective') {
                renderSubjective();
            } else {
                // ç­›é€‰é¢˜ç›®
                filteredQuestions = allQuestions.filter(q => filter === 'all' || q.section === filter);
                currentIndex = 0;
                userAnswers = {};
                score = 0;
                document.getElementById('scoreText').innerText = 0;
                
                document.getElementById('questionCard').classList.remove('hidden');
                document.getElementById('subjectiveCard').classList.add('hidden');
                document.getElementById('controlBar').classList.remove('hidden');
                
                renderQuestion();
            }
        }

        function renderQuestion() {
            if (filteredQuestions.length === 0) {
                alert("è¯¥ç« èŠ‚æš‚æ— é¢˜ç›®ï¼");
                return;
            }

            const q = filteredQuestions[currentIndex];
            const isAnswered = userAnswers[q.id] !== undefined;

            // æ›´æ–°å¤´éƒ¨ä¿¡æ¯
            document.getElementById('qTag').innerText = q.type === 'single' ? 'å•é€‰é¢˜' : 'å¤šé€‰é¢˜';
            document.getElementById('qTag').className = `px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide ${q.type === 'single' ? 'bg-blue-100 text-blue-600' : 'bg-purple-100 text-purple-600'}`;
            document.getElementById('qIndex').innerText = `${currentIndex + 1} / ${filteredQuestions.length}`;
            document.getElementById('qText').innerText = q.q;

            // è¿›åº¦æ¡
            const progress = ((currentIndex + 1) / filteredQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;

            // æ¸²æŸ“é€‰é¡¹
            const optsArea = document.getElementById('optionsArea');
            optsArea.innerHTML = '';
            
            q.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "btn-option w-full text-left p-4 rounded-lg bg-white border border-slate-200 text-sm font-medium hover:border-blue-300 relative";
                btn.innerText = opt;
                
                // çŠ¶æ€å›æ˜¾
                if (isAnswered) {
                    btn.disabled = true;
                    if (q.correct.includes(idx)) {
                        btn.classList.add('correct-bg');
                        btn.innerHTML += `<span class="absolute right-4 text-green-700 font-bold">âœ“</span>`;
                    } else if (userAnswers[q.id].includes(idx)) {
                        btn.classList.add('wrong-bg');
                        btn.innerHTML += `<span class="absolute right-4 text-red-700 font-bold">Ã—</span>`;
                    }
                } else {
                    // å¤šé€‰é€‰ä¸­æ€
                    if (userAnswers[q.id] && userAnswers[q.id].includes(idx)) {
                        btn.classList.add('selected-bg');
                    }
                    btn.onclick = () => handleSelect(idx);
                }
                optsArea.appendChild(btn);
            });

            // æŒ‰é’®é€»è¾‘
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            if (isAnswered) {
                showFeedback(q);
                submitBtn.classList.add('hidden');
                nextBtn.classList.remove('hidden');
            } else {
                document.getElementById('feedbackArea').classList.add('hidden');
                if (q.type === 'multi') {
                    submitBtn.classList.remove('hidden');
                    nextBtn.classList.add('hidden');
                } else {
                    submitBtn.classList.add('hidden');
                    nextBtn.classList.add('hidden'); // å•é€‰ç‚¹é€‰å³èµ°
                }
            }
        }

        function handleSelect(optIdx) {
            const q = filteredQuestions[currentIndex];
            
            if (q.type === 'single') {
                userAnswers[q.id] = [optIdx];
                checkAnswer();
            } else {
                // å¤šé€‰é€»è¾‘
                if (!userAnswers[q.id]) userAnswers[q.id] = [];
                const idx = userAnswers[q.id].indexOf(optIdx);
                if (idx > -1) {
                    userAnswers[q.id].splice(idx, 1);
                } else {
                    userAnswers[q.id].push(optIdx);
                }
                renderQuestion(); // é‡ç»˜é€‰ä¸­æ€
            }
        }

        function checkAnswer() {
            const q = filteredQuestions[currentIndex];
            const ans = userAnswers[q.id];
            
            if (!ans || ans.length === 0) {
                alert("è¯·é€‰æ‹©ç­”æ¡ˆï¼");
                return;
            }

            // åˆ¤åˆ† (ç®€å•çš„å…¨å¯¹æ‰å¾—åˆ†)
            const isCorrect = JSON.stringify(ans.sort()) === JSON.stringify(q.correct.sort());
            if (isCorrect) {
                score += (q.type === 'multi' ? 3 : 2); // å¤šé€‰3åˆ†ï¼Œå•é€‰2åˆ†
                document.getElementById('scoreText').innerText = score;
            }

            // å¼ºåˆ¶åˆ·æ–°ä¸ºå·²ç­”çŠ¶æ€
            // userAnswers å·²ç»åœ¨ handleSelect ä¸­æ›´æ–°äº†ï¼Œè¿™é‡Œä¸»è¦æ˜¯è§¦å‘ UI é”å®š
            renderQuestion();
        }

        function showFeedback(q) {
            const fbArea = document.getElementById('feedbackArea');
            const fbTitle = document.getElementById('feedbackTitle');
            const fbContent = document.getElementById('feedbackContent');
            
            fbArea.classList.remove('hidden');
            const userAns = userAnswers[q.id];
            const isCorrect = JSON.stringify(userAns.sort()) === JSON.stringify(q.correct.sort());

            fbTitle.innerHTML = isCorrect 
                ? `<span class="text-green-600">ğŸ‰ å›ç­”æ­£ç¡®</span>` 
                : `<span class="text-red-600">ğŸ˜¢ å›ç­”é”™è¯¯</span>`;
            
            fbContent.innerText = q.note ? `è§£æï¼š${q.note}` : "è§£æï¼šæš‚æ— è¯¦ç»†è§£æï¼Œè¯·å‚è€ƒè¯¾ä»¶ã€‚";
        }

        function nextQ() {
            if (currentIndex < filteredQuestions.length - 1) {
                currentIndex++;
                renderQuestion();
            } else {
                alert("æœ¬ç« èŠ‚é¢˜ç›®å·²åˆ·å®Œï¼ğŸ‰");
            }
        }

        function prevQ() {
            if (currentIndex > 0) {
                currentIndex--;
                renderQuestion();
            }
        }

        function renderSubjective() {
            document.getElementById('questionCard').classList.add('hidden');
            document.getElementById('controlBar').classList.add('hidden');
            const subArea = document.getElementById('subjectiveCard');
            subArea.classList.remove('hidden');
            subArea.innerHTML = '';

            subjectiveQuestions.forEach(item => {
                subArea.innerHTML += `
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="p-4 bg-slate-50 border-b border-slate-100 flex justify-between items-center cursor-pointer" onclick="this.nextElementSibling.classList.toggle('hidden')">
                            <h3 class="font-bold text-slate-800">${item.title}</h3>
                            <span class="text-slate-400">â–¼</span>
                        </div>
                        <div class="hidden p-6 bg-white">
                            <div class="mb-3">
                                <span class="text-xs font-bold text-slate-400 uppercase">Keywords</span>
                                <p class="text-blue-600 font-medium">${item.key}</p>
                            </div>
                            <div class="border-t border-slate-100 pt-3">
                                ${item.content}
                            </div>
                        </div>
                    </div>
                `;
            });
        }

    </script>
</body>
</html>